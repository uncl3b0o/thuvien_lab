<!DOCTYPE html>
<html>
    <head>
        <title>Thư viện</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.20.0/js/mdb.min.js"></script>
        <link rel = "stylesheet" href = "css/main.css"/>

    </head>

    <body>
      <div class="navbar">
        <a href="home.html">Trang chủ</a>
        <a href="">Giới thiệu</a>
        <a href="">Nội quy</a>
        <a href="">Quy định mượn trả</a>
        <a href="">Sách</a>
        <a href="">Tra cứu</a>
        <a href="">Liên hệ</a>
        {{#if user}}
        <a style="color: white;">Hello {{user.username}} !</a>
        <button onclick="document.getElementById('id03').style.display='block'" style="width:auto; float: right;">Đăng xuất</button>
        {{else}}
          <button onclick="document.getElementById('id01').style.display='block'" style="width:auto; float: right;">Đăng nhập</button>
          <button onclick="document.getElementById('id02').style.display='block'" style="width:auto; float: right;">Đăng kí</button>
        {{/if}}
      </div>

          <!-- Form Đăng nhập -->
      <div id="id01" class="modal">
        <form class="modal-content animate" action="/user/login" method="post">
          <div class="container">
            <label for="email"><b>Username</b></label>
            <input type="text" placeholder="Nhập username" name="email" id="email">
        
            <label for="password"><b>Password</b></label>
            <input type="password" placeholder="Nhập Password" name="password" id="password">
                
            <label>
              <input type="checkbox" checked="checked" name="remember"> Remember me
            </label>
          </div>
            <div class="container" style="background-color:#f1f1f1">
              <span class="psw">Quên <a href="#">mật khẩu?</a></span>
              <button type="submit" onclick="document.getElementById('id01')" class="loginbtn"><b>Đăng nhập</b></button>            
            </div>
          </form>
        </div>
        <script>
          var modal = document.getElementById('id01');
          // click bat ki vi tri nao de dong login
          window.onclick = function(event) {
              if (event.target == modal) {
                  modal.style.display = "none";
              }
          }
          </script>

          <!-- Form Đăng kí -->
      <div id="id02" class="modal">
        <form class="modal-content animate" action="/user/register" method="post">
          <div class="container">
            <label for="email"><b>Email</b></label>
            <input type="text" placeholder="Nhập Email" name="email" id="email">

            <label for="username"><b>Username</b></label>
            <input type="text" placeholder="Nhập Username" name="username" id="username">
        
            <label for="password"><b>Password</b></label>
            <input type="password" placeholder="Nhập Password" name="password" id="password">
                
          </div>
            <div class="container" style="background-color:#f1f1f1">
              <button type="submit" onclick="document.getElementById('id02')" class="loginbtn"><b>Đăng kí</b></button>            
            </div>
          </form>
        </div>
        <script>
          var modal = document.getElementById('id02');
          // click bat ki vi tri nao de dong register
          window.onclick = function(event) {
              if (event.target == modal) {
                  modal.style.display = "none";
              }
          }
          </script>

           <!-- Form đăng xuất -->
      <div id="id03" class="modal" tabindex="-1" role="dialog">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Đăng xuất</h5>
                <button type="button" class="close float-right" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <p>Bạn có chắc muốn đăng xuất ?</p>
              </div>
              <div class="modal-footer row">
                <button id="btn-logout" type="button" class="btn btn-primary col">Đăng xuất</button>
                <button type="button" class="btn btn-secondary col" data-dismiss="modal">Hủy</button>
              </div>
            </div>
          </div>
        </div>
        <script>
          var modal = document.getElementById('id03');
          // click bat ki vi tri nao de dong register
          window.onclick = function(event) {
              if (event.target == modal) {
                  modal.style.display = "none";
              }
          }
          </script>

          {{!-- Xử lí đăng xuất --}}
        <script>
          var btnLogout = document.getElementById('btn-logout');

          btnLogout.onclick = function () {
            document.cookie = "userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
            window.location.reload();
          }
        </script>

      <img src="image/library-facilities.jpg" alt="Library" style="width:100%; height:500px;">
      <div class="main">
      <h1>Sách mới cập nhật</h1>
      <hr>
      <!-- Portfolio Gallery Grid -->
      <div class="row">
        
        {{#each books}}
          <div class="column">
            <div class="content">
              <img src="{{this.image}}" alt="{{this.topic}}" style="width:100%">
              <h3>{{this.topic}}</h3>
              <p>{{this.description}}</p>
            </div>
          </div>
        {{/each}}
        
      <!-- END GRID -->
      </div>
    </div>
  </body>
</html>